cat /etc/*-release > ubuntu_version.txt

apt-get install binutils
apt-get install python
apt-get install gcc
apt-get install gdb
apt-get install binutils
apt-get install python
apt-get install build-essential
apt-get install libssl-dev
apt-get install apache2 # reverse proxy

wget https://nodejs.org/dist/v10.15.1/node-v10.15.1.tar.gz
gunzip node-v10.15.1.tar.gz 
tar -xvf node-v10.15.1.tar 
cd node-v10.15.1
ls
./configure
python tools/gyp_node.py --no-parallel -f make-linux
make
make install

vim root.js
npm init
npm install express --save
node root.js &

ps aux |grep node # result = process number node root.js
kill #node process number

npm install -g pm2 --save
cat /proc/cpuinfo > cpus_number.txt # result: 4 cpu's
pm2 start root.js -i 4 # These processes UP automatically if any problem.
pm2 list > pm2_4cpus.list

ps aux |grep node > ps_4process_root.js.txt # 4 process pm2 node

npm install http-proxy --save

vim 8081.js
vim 8082.js
vim 8083.js
vim 8084.js
vim balancer.js

vim /etc/apache2/sites-available/000-default.conf # Configured apache port 80 proxypass to 8080=balancer.js
vim /etc/apache2/sites-available/001-default.conf # Configured apache 80 proxypass to 3000=root.js with pm2 to 4 process. 

# The Apache files UP are different. Is necessary change because response to the same port (80).

a2enmod proxy
a2enmod proxy_http
service apache2 restart

apt-get install sysstat # idle CPU resources
apt-get install siege # Web Stress - load test

siege -c 2000 -t 30s http://localhost/
